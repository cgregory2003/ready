"use strict";var _createClass=function(){function r(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,s){return t&&r(e.prototype,t),s&&r(e,s),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var KeyboardTracker=function(){function l(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{persistence:!1,history:!1,handler:null};_classCallCheck(this,l);var s=!0,r=!1,n=void 0;try{for(var a,i=Object.keys(e)[Symbol.iterator]();!(s=(a=i.next()).done);s=!0){var o=a.value;this[o]=e[o]}}catch(e){r=!0,n=e}finally{try{!s&&i.return&&i.return()}finally{if(r)throw n}}this.keys={},!0===this.persistence&&(this.keys=this.loadState()||{}),window.addEventListener("keydown",function(e){return t.logEvent(e,!0)}),window.addEventListener("keyup",function(e){return t.logEvent(e,!1)})}return _createClass(l,[{key:"saveState",value:function(){localStorage.setItem("keyboard-tracker",JSON.stringify(this.keys))}},{key:"loadState",value:function(){return JSON.parse(localStorage.getItem("keyboard-tracker"))}},{key:"key",value:function(e){return this.keys[e]||null}},{key:"keyExists",value:function(e){return null!==this.key(e)}},{key:"createKey",value:function(e,t){this.keys[e]={key:e,pressed:null,pressCount:0,lastPressed:Date.now(),history:[]}}},{key:"saveKeyPress",value:function(e,t){var s=Date.now();if(!0===t&&!0!==this.keys[e].pressed&&(this.keys[e].pressCount++,this.keys[e].lastPressed=s),!0===this.history){var r=!0===t?"down":"up";this.keys[e].history.push({state:r,timestamp:s})}this.keys[e].pressed=t}},{key:"logEvent",value:function(e,t){var s=e.key;this.keyExists(s)||this.createKey(s),this.key(s).pressed!==t&&(this.saveKeyPress(s,t),!0===this.persistence&&this.saveState(),null!==this.handler&&this.handler(this.key(s)))}}]),l}();