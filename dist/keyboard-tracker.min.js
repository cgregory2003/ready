"use strict";var _createClass=function(){function n(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,s){return t&&n(e.prototype,t),s&&n(e,s),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var KeyboardTracker=function(){function y(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{persistence:!1,history:!1};_classCallCheck(this,y),this.handler=e;var n=!0,r=!1,a=void 0;try{for(var i,l=Object.keys(s)[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var o=i.value;this[o]=s[o]}}catch(e){r=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw a}}this.keys={},!0===this.persistence&&(this.keys=this.loadState()||{}),window.addEventListener("keydown",function(e){return t.logEvent(e,!0)}),window.addEventListener("keyup",function(e){return t.logEvent(e,!1)})}return _createClass(y,[{key:"saveState",value:function(){localStorage.setItem("keyboard-tracker",JSON.stringify(this.keys))}},{key:"loadState",value:function(){return JSON.parse(localStorage.getItem("keyboard-tracker"))}},{key:"key",value:function(e){return this.keys[e]||null}},{key:"keyExists",value:function(e){return null!==this.key(e)}},{key:"createKey",value:function(e,t){this.keys[e]={key:e,pressed:null,total:0,latest:Date.now(),history:[]}}},{key:"saveKeyPress",value:function(e,t){var s=Date.now();if(!0===t&&(this.keys[e].total++,this.keys[e].latest=s),!0===this.history){var n=!0===t?"down":"up";this.keys[e].history.push({state:n,timestamp:s})}this.keys[e].pressed=t}},{key:"logEvent",value:function(e,t){var s=e.key;this.keyExists(s)||this.createKey(s),this.key(s).pressed!==t&&(this.saveKeyPress(s,t),!0===this.persistence&&this.saveState(),null!==this.handler&&this.handler(this.key(s)))}}]),y}();